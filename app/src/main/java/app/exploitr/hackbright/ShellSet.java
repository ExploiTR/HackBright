package app.exploitr.hackbright;

import android.os.AsyncTask;
import android.support.design.widget.Snackbar;
import android.view.View;
import android.widget.TextView;

import me.tankery.lib.circularseekbar.CircularSeekBar;

class ShellSet extends AsyncTask<Integer,Void,Integer> {
    private String mmPath;
    private String mPath;
    private CircularSeekBar seekBarX;
    private TextView seekBack;
    private View mView;


    ShellSet(CircularSeekBar seekBar, TextView viewback, View decorView,String path,String xpath) {
        this.seekBarX = seekBar;
        this.seekBack = viewback;
        this.mView = decorView;
        this.mPath = path;
        this.mmPath = xpath;
    }

    @Override
    protected Integer doInBackground(Integer... params) {
        Integer value = params[0];
        Process executor1;
        System.out.println("INPUT "+value);
        System.out.println("XPATH"+mPath);
            try {
                executor1 = Runtime.getRuntime().exec("su -c echo "+value+" > "+mPath);
                executor1.waitFor();
            } catch (Exception e) {
                e.printStackTrace();
            }
        return value;
    }

    @Override
    protected void onPostExecute(Integer aVoid) {
        super.onPostExecute(aVoid);
        Snackbar.make(mView,"Brightness Set To : "+aVoid,Snackbar.LENGTH_LONG).show();
        new ShellGet(seekBarX,seekBack,mPath,mmPath).execute();
    }
}
