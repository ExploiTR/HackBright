package app.exploitr.hackbright;

import android.os.AsyncTask;
import android.support.design.widget.Snackbar;
import android.view.View;
import android.widget.TextView;

import me.tankery.lib.circularseekbar.CircularSeekBar;

class ShellSet extends AsyncTask<Integer,Void,Integer> {
    private CircularSeekBar seekBarX;
    private TextView seekBack;
    private View mView;


    ShellSet(CircularSeekBar seekBar, TextView viewback, View decorView) {
        this.seekBarX = seekBar;
        this.seekBack = viewback;
        this.mView = decorView;
    }

    @Override
    protected Integer doInBackground(Integer... params) {
        Integer value = params[0];
        Process executor1;
        System.out.println("INPUT "+value);
            try {
                executor1 = Runtime.getRuntime().exec("su -c echo "+value+" > /sys/class/leds/lcd-backlight/brightness");
                executor1.waitFor();
                if(executor1.exitValue()!=0){android.os.Process.killProcess(android.os.Process.myPid());}
            } catch (Exception e) {
                e.printStackTrace();
            }
        return value;
    }

    @Override
    protected void onPostExecute(Integer aVoid) {
        super.onPostExecute(aVoid);
        Snackbar.make(mView,"Brightness Set To : "+aVoid,Snackbar.LENGTH_LONG).show();
        new ShellGet(seekBarX,seekBack).execute();
    }
}
